<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title>Get Your Sh*t Done</title>
<link rel="stylesheet" type="text/css" href="Logged-in_style.css">
<link rel="shortcut icon" href="elements/favicon.ico">
</head>

<body>
	<header>
    	<div id="header-holder">
        <a href="Logged-in.html"><img src="elements/Banner3.png" id="header-logo"></a>
       	<div id="menu" align="right">
				<input id="menu-button" type="image" src="elements/Menu-button.png">
				<div id="menu-section">
					<input id="account" type="button" value="Acount" class="menu-button" style="margin-top:75px">
                    <input id="Log-out" type="button" value="Log-out" class="menu-button">
				</div>
		</div>
        </div>
        
        <div id="text-edit">
        	<div id="listtype-edit">
        		<div class="inbox-text" style="margin-right:30px">Listype:</div>
                <button id="note" class="listtype-edit-button">Note</button>
                <button id="task" class="listtype-edit-button">Task</button>
       		</div>
          	<div id="label">
                <div class="inbox-text">Label:</div>
                <button id="low" class="label-edit-button"></button>
                <button id="medium" class="label-edit-button"></button>
                <button id="high" class="label-edit-button"></button>
			</div>
        	<div id="text-menu">
                <div class="inbox-text">Text:</div>
                <button id="fontsize" class="text-edit-button">12</button>
				<button id="bold" class="text-edit-button"><b>B</b></button>
                <button id="italic" class="text-edit-button"><i>I</i></button>
                <button id="underlined" class="text-edit-button"><u>U</u></button>
                <button  id="opsomming-icoon" class="text-edit-button"></button>
           </div>
       </div>      
  	</header>
	<main>
    <div class="todolist-section" align="left">
    
    	<div class="todolist-holder">
        	<div class="todolist-header">
            	<div class="todolist-header-title">Iets moet gedaan worden</div>
                <input class="todolist-menubutton" type="image" src="elements/Menu-button-groen.png" align="right">
            </div>
            <div align="right">
            <div class="List-Menu"></div> 
            </div>
       	 </div>
   
	</div>
    
    </main>
    
    <footer>
    	<div id="add-holder">
        <div align="right">
        	<input id="addList-button" type="image" src="elements/Add-button_white.png">
            </div>
    	</div>
    </footer>


<script src = "http://code.jquery.com/jquery-2.0.3.min.js"></script>
<script src="client-app.js"></script>

<script
src = "http://code.jquery.com/jquery-2.0.3.min.js"></script>

<script src="client-app.js">
</script>


<script type="text/javascript">
function TodoList () {
    this.name = "";
    this.priority = "low"; //defualt
    this.numberTodos = 0; //initial value
    this.status = function () {
        return this.countDone + "/" + this.getNumberTodos();
    }; //initially 0/0 todos done
    this.todos = []; //empty list
    this.kind = task; //note or tasklist
    this.countDone = 0; //number of todos in this list done
};

//TodoList.prototype.setMember("membername", value) {
    //this.membername = value;
//}
//TodoList.prototype.getMember("membername") {
    //return this.membername;
//}

TodoList.prototype.push = function(todo) {
    this.list.push(todo);
    //this.numberTodos++;
    };
TodoList.prototype.setName = function(name) {
    this.name = name;
};
TodoList.prototype.getName = function(name) {
    return this.name;
};
TodoList.prototype.setPriority = function(priority) {
    this.priority = priority;
};
TodoList.prototype.getPriority = function() {
    return this.priority;
};
TodoList.prototype.getNumberTodos = function () {
    return this.numberTodos;
};
TodoList.prototype.setStatus = function () {
    this.status = this.countDone + "/" + this.getNumberTodos(); //change status and return the string representation
};
TodoList.prototype.setStatus = function () {
    return this.status; 
};

function Todo () {
    this.content = "";
    this.duedate = "today";
    this.duetime = "now"
    this.label = "low";
    this.todoListclass = null;
    this.status = "undone";
    this.creationDate = new Date().toUTCString();
}

Todo.prototype.setContent = function (content) {
    this.content = content;
};
Todo.prototype.setDueDate = function (duedate) {
    this.duedate = duedate;
};
// Todo.prototype.creationDueDate = function () {
//  var today = new Date(); //creates a new date, default is the creationdate
//  this.creationDate = today.toUTCString();
// };
Todo.prototype.setLabel = function (label) { //medium as default
    this.label = label;
};
Todo.prototype.setStatus = function (status) {
    this.status = status;
};
Todo.prototype.setDueTime = function(time) {
    this.duetime = time;
};

function main() {
    "use strict"

    var mode = document.designMode; //designmode on makes sure the entire document is editable
    document.designMode = "off";

var todolists = []; //array to hold todolists;

//addList
function addTaskList() {
    var newTodolist = new TodoList(); //add to todolistList
    var k = todolists.push(newTodolist); //push at the end 
    var $new_todolist = $("<div>"); //jquery to append to the DOM, create a new list element with a nested unordered list
	var index = (todolists.length).toString();
console.log(index);
     $new_todolist.addClass('todolist-holder ' + index + " low");
    $('.todolist-section').append($new_todolist);

    
	var $header = $('<div class="todolist-header">');
	$new_todolist.append($header);
 
    var $title = $('<input type="text" name = "title" size ="10" class="todolist-header-title" value="">'); 
    $header.append($title);

var $addtodoButton = $("<button>"); //or $("input") for the add - todobutton
$addtodoButton.text("+");
    $addtodoButton.addClass("addTodo");
    $header.append($addtodoButton); 

	
var $todolistmenu = $('<input  class="todolist-menubutton" type="image" src="elements/Menu-button-groen.png" align="right">');
	$header.append($todolistmenu);
	$todolistmenu.on("click", ClickTodomenu);

	var $listmenu = $("<div class='list-section' align='right'>");
	$new_todolist.append($listmenu);

	var $listmenuthing = $('<div class="List-Menu" style="display: none;">');
	$listmenu.append($listmenuthing);
	

    var $todos = $("<ul>"); //ul for the todos in this list ($new_todolist)
    $todos.addClass("todos");
    $new_todolist.append($todos);

   
    
    $('.todolist-header-title').on('keypress', function(event){ //if focus on the input field and a key is pressed, then function is called
        if(event.which === 13) { //enter key pressed
            var newTitle =$(this).val(); //or $(event).val() ?, get the input
            $(this).val(newTitle); //set the input as the value for this input field
            var thisListnumber = $(this).parent().attr('class').split(' ')[1]; 
            todolists[thisListnumber -1].setName(newTitle); //update the array
        };
    });


};

$('#addList-button').on('click', addTaskList);


	$('#menu-section').hide();
	$('.List-Menu').hide();
	function ClickTodomenu(){
			var $listmenu = $(this).parent().siblings(".list-section").children(".List-Menu");
			$listmenu.fadeToggle();
			var src3 = "elements/Menu-button-groen.png";
			var src4 = "elements/Menu-button-groen-close.png";
			
			if($(this).attr("src") === src3){
				$(this).attr("src",src4);
			}
			else{
				$(this).attr("src",src3);
			};
			
		};

	$(document).ready(function(){
		$(".todolist-menubutton").click(ClickTodomenu);

	 $("#menu-button").click(function(){
        $("#menu-section").fadeToggle();
		var src1 = "elements/Menu-button.png";
		var src2 = "elements/Menu-button_close.png";
		if($("#menu-button").attr("src") === src1){
		$("#menu-button").attr("src",src2);
		}
		else{
			$("#menu-button").attr("src",src1);
		};
    });
	});
	};




$(document).ready(main);
</script>
</body>
</html>
